(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{710:function(e,s,v){"use strict";v.r(s);var t=v(92),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,v=e._self._c||s;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"ç¯å¢ƒå˜é‡å’Œæ¨¡å¼"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒå˜é‡å’Œæ¨¡å¼"}},[e._v("#")]),e._v(" ç¯å¢ƒå˜é‡å’Œæ¨¡å¼")]),e._v(" "),v("p",[e._v("å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ·»åŠ ä»¥ä¸‹æ–‡ä»¶æ¥ä¸ºé¡¹ç›®æŒ‡å®šç¯å¢ƒå˜é‡ï¼š")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v(".env               "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# åœ¨æ‰€æœ‰çš„ç¯å¢ƒä¸­è¢«è½½å…¥")]),e._v("\n.env.local         "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# åœ¨æ‰€æœ‰çš„ç¯å¢ƒä¸­è¢«è½½å…¥ï¼Œä½†æ˜¯ä¼šè¢« git å¿½ç•¥")]),e._v("\n.env."),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("mode"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("        "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# åœ¨æŒ‡å®šçš„æ¨¡å¼ä¸‹è¢«è½½å…¥")]),e._v("\n.env."),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("mode"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(".local  "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# åœ¨æŒ‡å®šçš„æ¨¡å¼ä¸‹è½½å…¥ï¼Œä½†æ˜¯ä¼šè¢« git å¿½ç•¥")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("p",[e._v("ä¸€ä¸ª dotenv æ–‡ä»¶ä¸­åªå¯åŒ…å«ç¯å¢ƒå˜é‡çš„é”®å€¼å¯¹ï¼Œä¾‹å¦‚:")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("FOO=bar\nAPP_URL=https://example.com/\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br")])]),v("p",[e._v("è¢«è½½å…¥çš„ç¯å¢ƒå˜é‡ä¼šå¯¹ "),v("code",[e._v("@luban-cli/cli-plugin-service")]),e._v(" ä»¥åŠå…¶æ’ä»¶ã€ä¾èµ–å¯ç”¨ã€‚")]),e._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[e._v("ç¯å¢ƒåŠ è½½å±æ€§")]),e._v(" "),v("p",[e._v("ä¸ºä¸€ä¸ªç‰¹å®šæ¨¡å¼å‡†å¤‡çš„ç¯å¢ƒæ–‡ä»¶ (ä¾‹å¦‚ "),v("em",[e._v(".env.production")]),e._v(") å°†ä¼šæ¯”ä¸€èˆ¬çš„ç¯å¢ƒæ–‡ä»¶ (ä¾‹å¦‚ "),v("em",[e._v(".env")]),e._v(") æ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚")]),e._v(" "),v("p",[e._v("æ­¤å¤–ï¼ŒLuban å¯åŠ¨æ—¶å·²ç»å­˜åœ¨çš„ç¯å¢ƒå˜é‡æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œå¹¶ä¸ä¼šè¢« "),v("em",[e._v(".env")]),e._v(" æ–‡ä»¶è¦†å†™ã€‚")])]),e._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[e._v("ğŸ™‹")]),e._v(" "),v("p",[e._v("å¯¹äº dotenv æ–‡ä»¶çš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š"),v("em",[e._v(".env.[mode].local > .env.[mode] > env.local > .env")])])]),e._v(" "),v("h2",{attrs:{id:"æ¨¡å¼"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡å¼"}},[e._v("#")]),e._v(" æ¨¡å¼")]),e._v(" "),v("p",[e._v("ä¸€ä¸ª CLI åˆ›å»ºçš„é¡¹ç›®é€šå¸¸æœ‰ä¸¤ç§æ¨¡å¼ï¼š")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("development")]),e._v(" æ¨¡å¼è¢«ç”¨äº "),v("code",[e._v("cli-plugin-service serve")])]),e._v(" "),v("li",[v("code",[e._v("production")]),e._v(" æ¨¡å¼è¢«ç”¨äº "),v("code",[e._v("cli-plugin-service build")])])]),e._v(" "),v("p",[e._v("æ¨¡å¼(mode) ä¸åŒäº "),v("code",[e._v("process.env.NODE_ENV")]),e._v(" ï¼Œä¸€ä¸ªæ¨¡å¼ä¸‹å¯ä»¥åŒ…å«å¤šä¸ªç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä¸º "),v("em",[e._v(".env")]),e._v(" æ–‡ä»¶æ·»åŠ æ¨¡å¼åç¼€æ¥æŒ‡å®šç‰¹å®šæ¨¡å¼ä¸‹çš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º "),v("em",[e._v(".env.development")]),e._v(" æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šåœ¨ development æ¨¡å¼è¢«è½½å…¥ã€‚")]),e._v(" "),v("p",[e._v("ç„¶åå¯ä»¥é€šè¿‡ mode å‚æ•°æ¥ä½¿ç”¨ç‰¹å®šæ¨¡å¼ä¸‹çš„ç¯å¢ƒå˜é‡:")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("cli-plugin-service serve --mode development\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[e._v("ğŸ™‹")]),e._v(" "),v("p",[v("code",[e._v("cli-plugin-service server")]),e._v(" ä¼šå°† "),v("code",[e._v("process.env.NODE_ENV")]),e._v(" è®¾ç½®ä¸º "),v("code",[e._v("development")]),e._v(", "),v("code",[e._v("cli-plugin-service build")]),e._v(" ä¼šå°† "),v("code",[e._v("process.env.NODE_ENV")]),e._v(" è®¾ç½®ä¸º "),v("code",[e._v("production")]),e._v(", å»ºè®®ä¸è¦å°† "),v("code",[e._v("process.env.NODE_ENV")]),e._v(" è®¾ç½®ä¸ºå…¶ä»–å€¼ï¼Œå› ä¸ºå…¶ä»–åº“ä¹Ÿå¯èƒ½ä½¿ç”¨äº†è¿™ä¸ªå€¼æ¥åŒºåˆ†ç¯å¢ƒã€‚")])]),e._v(" "),v("p",[v("strong",[e._v("ç¤ºä¾‹ï¼šmock æ¨¡å¼")])]),e._v(" "),v("p",[e._v("å‡è®¾é¡¹ç›®æ ¹ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ª "),v("em",[e._v(".env")]),e._v(" æ–‡ä»¶:")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("APP_URL=https://example.com\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("å’Œ "),v("em",[e._v(".env.mock")]),e._v(" æ–‡ä»¶")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("MOCK=true\nAPP_URL=https://example.mock.com\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br")])]),v("ol",[v("li",[e._v("è¿è¡Œ "),v("code",[e._v("cli-plugin-service build")]),e._v(" å°†ä¼šåŠ è½½å¯èƒ½å­˜åœ¨çš„ "),v("em",[e._v(".env")]),e._v(", "),v("em",[e._v(".env.production")]),e._v(", "),v("em",[e._v(".env.production.local")]),e._v(" æ–‡ä»¶ï¼Œç„¶åæ ¹æ®è¿™äº›æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡æ¥æ„å»ºå¯ç”¨äºç”Ÿäº§ç¯å¢ƒåº”ç”¨ã€‚")]),e._v(" "),v("li",[e._v("è¿è¡Œ "),v("code",[e._v("cli-plugin-service build --mode=mock")]),e._v(" å°†ä¼šåŠ è½½å¯èƒ½å­˜åœ¨çš„ "),v("em",[e._v(".env.mock")]),e._v(", "),v("em",[e._v(".env.mock.local")]),e._v(" æ–‡ä»¶ï¼Œç„¶åæ ¹æ®è¿™äº›ç¯å¢ƒå˜é‡æ¥æ„å»ºå¯ç”¨äºç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨ã€‚")])]),e._v(" "),v("p",[e._v("è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œç”±äºè¿è¡Œçš„æ˜¯ build å‘½ä»¤ï¼Œæ‰€ä»¥éƒ½æ˜¯æ„å»ºç”¨äºç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨ï¼Œä½†æ˜¯åœ¨ mock æ¨¡å¼ä¸‹ï¼Œ"),v("code",[e._v("process.env.APP_URL")]),e._v(" å°†ä¼šè¢«è¦†å†™ä¸ºå¦å¤–ä¸€ä¸ªå€¼ã€‚")]),e._v(" "),v("p",[e._v("åŒæ—¶ï¼Œåªæœ‰ä»¥ "),v("code",[e._v("/^APP_/")]),e._v(" å¼€å¤´çš„å˜é‡æ‰ä¼šè¢« "),v("a",{attrs:{href:"https://webpack.js.org/plugins/define-plugin/#root",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack.DefinePlugin"),v("OutboundLink")],1),e._v(" æ³¨å…¥å®¢æˆ·ç«¯æµ‹çš„ä»£ç ä¸­ï¼Œå¯ä»¥åœ¨ä½ çš„åº”ç”¨ä»£ç ä¸­è¿™æ ·ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š")]),e._v(" "),v("div",{staticClass:"language-javascript line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-javascript"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[e._v('// æ³¨æ„ APP_URL å¯¹åº”çš„å€¼å°†ä¼šå˜æˆ "https://example.mock.com"')]),e._v("\nconsole"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("process"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("env"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),v("span",{pre:!0,attrs:{class:"token constant"}},[e._v("APP_URL")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br")])]),v("p",[e._v("é™¤äº†ä»¥ "),v("code",[e._v("/^APP_/")]),e._v(" å¼€å¤´çš„ç¯å¢ƒå˜é‡å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥åœ¨åº”ç”¨ä¸­è®¿é—®åˆ°ï¼š")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("NODE_ENV")]),e._v(" å°†ä¼šæ˜¯ "),v("code",[e._v("development")]),e._v(" ã€ "),v("code",[e._v("production")]),e._v(" ä¸­çš„ä¸€ä¸ªã€‚")]),e._v(" "),v("li",[v("code",[e._v("BASE_URL")]),e._v(" å– "),v("code",[e._v("luban.config.js")]),e._v(" é…ç½®ä¸­çš„ "),v("code",[e._v("publicPath")]),e._v(" é€‰é¡¹ï¼Œå³åº”ç”¨éƒ¨ç½²æ—¶çš„åŸºç¡€è·¯å¾„ã€‚")])]),e._v(" "),v("h2",{attrs:{id:"åªåœ¨æœ¬åœ°æœ‰æ•ˆçš„å˜é‡"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#åªåœ¨æœ¬åœ°æœ‰æ•ˆçš„å˜é‡"}},[e._v("#")]),e._v(" åªåœ¨æœ¬åœ°æœ‰æ•ˆçš„å˜é‡")]),e._v(" "),v("p",[e._v("æœ‰çš„æ—¶å€™ä½ å¯èƒ½æœ‰ä¸€äº›ä¸åº”è¯¥æäº¤åˆ°ä»£ç ä»“åº“ä¸­çš„å˜é‡ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„é¡¹ç›®æ‰˜ç®¡åœ¨å…¬å…±ä»“åº“æ—¶ã€‚è¿™ç§æƒ…å†µä¸‹ä½ åº”è¯¥ä½¿ç”¨ä¸€ä¸ª "),v("em",[e._v(".env.local")]),e._v(" æ–‡ä»¶å–è€Œä»£ä¹‹ã€‚æœ¬åœ°ç¯å¢ƒæ–‡ä»¶é»˜è®¤ä¼šè¢«å¿½ç•¥ï¼Œä¸”å‡ºç°åœ¨ "),v("em",[e._v(".gitignore")]),e._v(" æ–‡ä»¶ä¸­ã€‚")]),e._v(" "),v("p",[v("em",[e._v(".local")]),e._v(" ä¹Ÿå¯ä»¥åŠ åœ¨æŒ‡å®šæ¨¡å¼çš„ç¯å¢ƒæ–‡ä»¶ä¸Šï¼Œæ¯”å¦‚ "),v("em",[e._v(".env.development.local")]),e._v(" å°†ä¼šåœ¨ development æ¨¡å¼ä¸‹è¢«è½½å…¥ï¼Œä¸”è¢« git å¿½ç•¥ã€‚")])])}),[],!1,null,null,null);s.default=n.exports}}]);