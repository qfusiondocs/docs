(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{704:function(s,t,e){"use strict";e.r(t);var r=e(92),a=Object(r.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"css-相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-相关"}},[s._v("#")]),s._v(" CSS 相关")]),s._v(" "),e("p",[s._v("Luban 默认支持 "),e("em",[s._v(".css")]),s._v(" 文件，同时默认支持 "),e("a",{attrs:{href:"https://postcss.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostCSS"),e("OutboundLink")],1),s._v("。仅支持一种 CSS 预处理器，即 "),e("a",{attrs:{href:"http://lesscss.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Less"),e("OutboundLink")],1),s._v("，同时对 "),e("em",[s._v(".less")]),s._v(" 文件开启 "),e("a",{attrs:{href:"https://github.com/css-modules/css-modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSSModule"),e("OutboundLink")],1),s._v(" 支持("),e("em",[s._v(".css")]),s._v(" 文件默认不支持此特性)，支持一种 "),e("a",{attrs:{href:"https://github.com/MicheleBertoli/css-in-js",target:"_blank",rel:"noopener noreferrer"}},[s._v("css-in-js"),e("OutboundLink")],1),s._v(" 方案 "),e("a",{attrs:{href:"https://www.styled-components.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Styled-components"),e("OutboundLink")],1),s._v("。具体配置见"),e("RouterLink",{attrs:{to:"/config/#luban-config-js"}},[s._v("luban.config.js")]),s._v("。")],1),s._v(" "),e("h2",{attrs:{id:"postcss"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#postcss"}},[s._v("#")]),s._v(" PostCSS")]),s._v(" "),e("p",[s._v("无论是否选择 "),e("a",{attrs:{href:"http://lesscss.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Less"),e("OutboundLink")],1),s._v(" 还是 "),e("a",{attrs:{href:"https://www.styled-components.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Styled-components"),e("OutboundLink")],1),s._v("，Luban 都默认支持 "),e("a",{attrs:{href:"https://postcss.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostCSS"),e("OutboundLink")],1),s._v("。可以通过修改 "),e("em",[s._v(".postcssrc")]),s._v(" 文件或者 "),e("em",[s._v("luban.config.js")]),s._v(" 文件中的 "),e("code",[s._v("css.loaderOptions.postcss")]),s._v(" 的选项来配置 PostCSS 的行为。")]),s._v(" "),e("p",[s._v("同时 PostCSS 默认使用了 "),e("a",{attrs:{href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer"}},[s._v("autoprefixer"),e("OutboundLink")],1),s._v(" 来为样式表规则添加特定浏览器厂商前缀。如果要配置目标浏览器，可修改 "),e("em",[s._v(".browserslistrc")]),s._v(" 文件，更多可查阅 "),e("RouterLink",{attrs:{to:"/guide/browser-compatibility.html#browserslist"}},[s._v("browserslist")]),s._v(" 。")],1),s._v(" "),e("p",[s._v("默认使用了 "),e("a",{attrs:{href:"https://github.com/csstools/postcss-preset-env",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-preset-env"),e("OutboundLink")],1),s._v(" 提供现代 CSS 特性的支持，并自动注入 polyfill，可以在修改 "),e("em",[s._v(".postcssrc")]),s._v(" 文件中的 "),e("code",[s._v("postcss-preset-env")]),s._v(" 字段来配置此特性。")]),s._v(" "),e("p",[s._v("默认使用了 "),e("a",{attrs:{href:"https://cssnano.co/",target:"_blank",rel:"noopener noreferrer"}},[s._v("cssnano"),e("OutboundLink")],1),s._v(" 来优化压缩样式代码，可以修改 "),e("em",[s._v(".postcssrc")]),s._v(" 文件中的 "),e("code",[s._v("cssnano")]),s._v(" 字段来配置此特性。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("关于 CSS 中浏览器前缀规则的注意事项")]),s._v(" "),e("p",[s._v("在生产环境构建中，Luban 会优化 CSS 并基于目标浏览器抛弃不必要的浏览器前缀规则。因为默认开启了 "),e("code",[s._v("autoprefixer")]),s._v("，你只使用无前缀的 CSS 规则即可。")])]),s._v(" "),e("h2",{attrs:{id:"css-modules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-modules"}},[s._v("#")]),s._v(" CSS Modules")]),s._v(" "),e("p",[s._v("仅对 "),e("em",[s._v(".less")]),s._v(" 文件支持 CSS Module，默认的模块类名为 "),e("code",[s._v("[local]-[hash:base64:5]")]),s._v("，可以通过配置 "),e("em",[s._v("luban.config.js")]),s._v(" 中的 "),e("code",[s._v("css.loaderOptions.css")]),s._v(" 向 "),e("a",{attrs:{href:"https://github.com/webpack-contrib/css-loader",target:"_blank",rel:"noopener noreferrer"}},[s._v("css-loader"),e("OutboundLink")],1),s._v(" 传递选项来更改默认的类名以及更改更多的配置选项。")]),s._v(" "),e("p",[e("strong",[s._v("TODO")]),s._v(" ✏️ 如何开启为 css 文件支持 CSS Module?")]),s._v(" "),e("p",[e("strong",[s._v("TODO")]),s._v(" ✏️ 如何关闭为 less 文件默认支持的 CSS Module?")]),s._v(" "),e("h2",{attrs:{id:"向预处理器-loader-传递选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#向预处理器-loader-传递选项"}},[s._v("#")]),s._v(" 向预处理器 Loader 传递选项")]),s._v(" "),e("p",[s._v("有的时候你想要向 webpack 的预处理器 loader 传递选项。你可以使用 "),e("em",[s._v("luban.config.js")]),s._v(" 中的 "),e("code",[s._v("css.loaderOptions")]),s._v(" 选项。比如你可以这样向所有 Less 样式传入共享的全局变量：")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// luban.config.js")]),s._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  css"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    loaderOptions"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 给 less-loader 传递 Less.js 相关选项")]),s._v("\n      less"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// http://lesscss.org/usage/#less-options-strict-units `Global Variables`")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// `primary` is global variables fields name")]),s._v("\n        globalVars"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          primary"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#fff'")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      css"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里的选项会传递给 css-loader")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      postcss"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里的选项会传递给 postcss-loader")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      miniCss"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里的选项会传递给 mini-css-extract-plugin 的 loader")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[s._v("Loader 可以通过 "),e("code",[s._v("loaderOptions")]),s._v(" 配置，包括：")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/webpack-contrib/css-loader",target:"_blank",rel:"noopener noreferrer"}},[s._v("css-loader"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/postcss/postcss-loader",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-loader"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/webpack-contrib/less-loader",target:"_blank",rel:"noopener noreferrer"}},[s._v("less-loader"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/webpack-contrib/mini-css-extract-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("mini-css-extract-plugin"),e("OutboundLink")],1)])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("🙋")]),s._v(" "),e("p",[s._v("这样做比使用 "),e("code",[s._v("chainWebpack")]),s._v(" 手动指定 loader 更推荐，因为这些选项需要应用在使用了相应 loader 的多个地方。")])]),s._v(" "),e("h2",{attrs:{id:"提取-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提取-css"}},[s._v("#")]),s._v(" 提取 CSS")]),s._v(" "),e("p",[s._v("Luban 对 "),e("em",[s._v(".css")]),s._v(" 文件还是 "),e("em",[s._v(".less")]),s._v(" 文件，在开发环境下使用 "),e("a",{attrs:{href:"https://github.com/webpack-contrib/style-loader",target:"_blank",rel:"noopener noreferrer"}},[s._v("style-loader"),e("OutboundLink")],1),s._v(" 将输出的样式表代码通过 "),e("code",[s._v("<style>")]),s._v(" 标签内联到文档的头部。")]),s._v(" "),e("p",[s._v("在生产环境下使用 "),e("a",{attrs:{href:"https://github.com/webpack-contrib/mini-css-extract-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("mini-css-extract-plugin"),e("OutboundLink")],1),s._v(" 的 loader 以及 plugin 将样式表代码抽取到一个或几个单独的 CSS 文件中。")])])}),[],!1,null,null,null);t.default=a.exports}}]);