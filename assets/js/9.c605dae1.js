(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{702:function(s,t,a){"use strict";a.r(t);var n=a(92),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"cli-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cli-服务"}},[s._v("#")]),s._v(" CLI 服务")]),s._v(" "),a("h2",{attrs:{id:"使用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用命令"}},[s._v("#")]),s._v(" 使用命令")]),s._v(" "),a("p",[s._v("使用 Luban 创建的项目中，"),a("code",[s._v("@luban-cli/luban-cli-service")]),s._v(" 会提供 "),a("code",[s._v("luban-cli-service")]),s._v(" 命令。")]),s._v(" "),a("p",[s._v("你可以在 npm scripts 中以 "),a("code",[s._v("luban-cli-service")]),s._v("、或者从终端中以 "),a("code",[s._v("./node_modules/.bin/luban-cli-service")]),s._v(" 访问这个命令。")]),s._v(" "),a("p",[s._v("同时在 "),a("em",[s._v("package.json")]),s._v(" 文件的 "),a("code",[s._v("scripts")]),s._v(" 字段会增加以下几个脚本：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run serve"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"luban-cli-service serve --open"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"luban-cli-service build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"inspect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"luban-cli-service inspect"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("可以通过 npm 来执行这些 scripts:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"luban-cli-service-serve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#luban-cli-service-serve"}},[s._v("#")]),s._v(" luban-cli-service serve")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("用法：luban-cli-service serve "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n选项：\n\n  --entry   指定入口文件 (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" index.jsx/index.tsx)\n  --open    在贝蒂服务启动时打开浏览器 (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(")\n  --mode    指定环境模式 (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" development)\n  --host    指定 host (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(")\n  --port    指定 port (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(")\n  --https   使用 https (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(")\n  --public  指定本地开发服务的 publicPath (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v(")\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("该脚本命令会启动一个基于 "),a("code",[s._v("webpack-dev-server")]),s._v(" 的本地开发服务，并且会附加一些默认的配置和功能。")]),s._v(" "),a("h3",{attrs:{id:"luban-cli-service-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#luban-cli-service-build"}},[s._v("#")]),s._v(" luban-cli-service build")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("用法：luban-cli-service build "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n选项：\n\n  --entry    指定入口文件 (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" index.jsx/index.tsx)\n  --mode     指定环境模式 (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" production)\n  --dest     指定输出目录 (默认值"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dist)\n  --report   生成 report.html 以帮助分析包内容\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("该命令会以 "),a("em",[s._v("dist")]),s._v(" 为默认目录产生一个可以用于生产环境的包，自动的 vendor chunk split。其中 chunk mainfest 会内联在 html 文件中。")]),s._v(" "),a("h3",{attrs:{id:"luban-cli-service-inspect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#luban-cli-service-inspect"}},[s._v("#")]),s._v(" luban-cli-service inspect")]),s._v(" "),a("blockquote",[a("p",[s._v("用来审查特定环境下的 webpack 配置")])]),s._v(" "),a("p",[s._v("比如审查 development 环境下的 webpack 配置:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("// 审查 development 环境下的 webpack 配置并输出到 config.txt 文件中\nluban-cli-service inspect --mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("development "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("审查特定规则/插件的配置:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("// 审查关于 css 规则的配置\nluban-cli-service inspect --rule"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("css\n\n// 生产 html 插件的配置\nluban-cli-service inspect --plugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"git-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-hooks"}},[s._v("#")]),s._v(" Git Hooks")]),s._v(" "),a("p",[s._v("在创建项目的尾声，Luban 会安装 "),a("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky"),a("OutboundLink")],1),s._v(" 和 "),a("a",{attrs:{href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"}},[s._v("lint-staged"),a("OutboundLink")],1),s._v("\n它会让你在 "),a("em",[s._v("package.json")]),s._v(" 的 "),a("code",[s._v("hooks")]),s._v(" 字段中方便地指定 "),a("a",{attrs:{href:"https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git Hooks"),a("OutboundLink")],1),s._v("：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pre-commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lint-staged"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint-staged"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"src/**/*.{ts,tsx}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run eslint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run format:check:ts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"src/**/*.{css,less}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run stylelint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run format:check:style"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"缓存和并行处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存和并行处理"}},[s._v("#")]),s._v(" 缓存和并行处理")]),s._v(" "),a("ul",[a("li",[a("p",[a("s",[a("code",[s._v("cache-loader")]),s._v(" 会默认为 JavaScript/TypeScript 编译开启。文件会缓存在 "),a("code",[s._v("node_modules/.cache")]),s._v(" 中——如\n果你遇到了编译方面的问题，记得先删掉缓存目录之后再试试看。(UNSUPPORTED TODO)")])])]),s._v(" "),a("li",[a("p",[a("s",[a("code",[s._v("thread-loader")]),s._v(" 会在多核 CPU 的机器上为 JavaScript/TypeScript 转译开启。(UNSUPPORTED TODO)")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);